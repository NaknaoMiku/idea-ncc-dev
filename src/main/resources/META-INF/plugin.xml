<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>com.lijiahaosummer.nccdev</id>
    <version>1.0.4</version>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>NCC开发插件</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="lijiahaosummer@gmail.com" url="https://www.lijiahaosummer.com">yonyou</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description>
        <![CDATA[
		YonYou NC Cloud Secondary development tools
		<ul>
            <li>Support NCC1909.</li>
            <li>Support NCC2005.</li>
            <li>Support NCC2105.</li>
            <li>Support NCC2111.</li>
		</ul>
	]]>
    </description>

    <change-notes><![CDATA[

      <h3>1.0.4</h3>
      <ul>
          <li>1. 新增打开NC Home功能</li>
          <li>2. 新增打开NC配置功能</li>
          <li>3. 新增打开社区（https://nccdev.yonyou.com/index）功能</li>
          <li>4. 兼容IntelliJ IDEA 2022.2.2</li>
      </ul>

      <h3>1.0.3</h3>
      <ul>
          <li>1. 调整插件使用的api，避免新版本开发工具不兼容</li>
          <li>2. 导出补丁时默认勾选包含源代码</li>
          <li>3. 支持复制资源文件(*.properties)到home</li>
          <li>4. 修复部分情况下插件报错的问题</li>
      </ul>
    ]]>
    </change-notes>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <moduleType id="NCCMODULE" implementationClass="com.summer.lijiahao.module.NCCModuleType"/>
        <projectService serviceInterface="com.summer.lijiahao.base.NccEnvSettingService"
                        serviceImplementation="com.summer.lijiahao.base.NccEnvSettingService"/>
        <projectService serviceImplementation="com.summer.lijiahao.utils.openapi.OpenApiService"/>
        <notificationGroup id="ncc-dev-tools-bmonkeyk"
                           displayType="BALLOON"/>

        <toolWindow id="OpenApi Tool" secondary="false" anchor="right"
                    factoryClass="com.summer.lijiahao.utils.openapi.OpenApiToolWin"/>
    </extensions>


    <actions>

        <action id="dev.module.conver" class="com.summer.lijiahao.module.action.ConvertModuleAction" text="转为ncc模块"
                description="转为ncc模块" icon="AllIcons.Actions.ModuleDirectory">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <action id="dev.module.newmodule" class="com.summer.lijiahao.module.action.CreateNewNCModuleAction"
                text="新建ncc模块"
                description="新建ncc模块" icon="AllIcons.Actions.ModuleDirectory">
            <add-to-group group-id="NewGroup" relative-to-action="NewModule" anchor="before"/>
        </action>

        <action id="dev.module.newcomponent" class="com.summer.lijiahao.module.action.CreateNCComponentAction"
                text="新建ncc组件"
                description="新建ncc组件" icon="AllIcons.Actions.ModuleDirectory">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <add-to-group group-id="NewGroup" relative-to-action="NewModule" anchor="before"/>
        </action>

        <action id="dev.extend.copy" class="com.summer.lijiahao.extend.action.CopyExtendAction" text="复制鉴权文件到nchome"
                description="复制鉴权文件到nchome">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="copy.upm.copy" class="com.summer.lijiahao.upm.action.CopyUpmAction" text="复制upm文件到nchome"
                description="复制upm文件到nchome">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="dev.resources.copy" class="com.summer.lijiahao.resources.action.CopyResourcesAction"
                text="复制resources文件到home" description="复制resources文件到home">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <action id="dev.set.libraries" class="com.summer.lijiahao.library.action.LibrariesSetAction" popup="true"
                text="设置nc类路径" description="设置nc类路径">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>

        <action id="dev.config" class="com.summer.lijiahao.devconfig.action.DevConfigAction" popup="true" text="集成配置"
                description="集成配置">
        </action>

        <action id="dev.sql.item.export"
                class="com.summer.lijiahao.script.action.ExportCommonInitAction" text="item导出预置脚本"
                description="使用items.xml文件导出预置数据脚本">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="dev.sql.pdm.export"
                class="com.summer.lijiahao.script.action.ExportDBCreateScriptsAction" text="pdm导出建库脚本"
                description="使用pdm文件导出建库脚本">
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="dev.patcher.export" class="com.summer.lijiahao.patcher.action.BuildPatcherAction" text="导出补丁NCC补丁"
                description="导出NMC格式补丁">
            <add-to-group group-id="ChangesViewPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
            <add-to-group group-id="Vcs.Log.ChangesBrowser.Popup" anchor="last"/>
        </action>
        <!--        <action id="publishMetaData" class="com.yingling.metadata.action.PublishMetaDataAction" text="发布元数据"-->
        <!--                description="发布元数据">-->
        <!--            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>-->
        <!--        </action>-->
        <action id="dev.application.server.create" class="com.summer.lijiahao.debug.action.NewServerApplicationAction"
                text="server application" description="server application"/>
        <action id="dev.application.client.create" class="com.summer.lijiahao.debug.action.NewClientApplicationAction"
                text="client application" description="client application"/>

        <action id="dev.dictionary" class="com.summer.lijiahao.dictionary.action.DataDictionaryAction" text="数据字典"
                description="数据字典"/>

        <action id="dev.openHome" class="com.summer.lijiahao.utils.OpenNCHomeAction" text="NCHome"
                description="NCHome"/>

        <action id="dev.openConfig" class="com.summer.lijiahao.utils.OpenNCConfigAction" text="NC配置"
                description="NC配置"/>

        <action id="dev.openNccdev" class="com.summer.lijiahao.utils.OpenNccdevAction" text="nccdev"
                description="nccdev"/>

        <action id="dev.reload.module" class="com.summer.lijiahao.devconfig.action.LoadAllModuleAction" text="加载所有模块"
                description="加载所有模块"/>
        <group id="dev.debug" text="调试..." popup="true" description="调试..."
               class="com.summer.lijiahao.debug.action.AppGroupAction">
            <reference id="dev.application.server.create"/>
            <reference id="dev.application.client.create"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </group>

        <group id="dev.group" description="集成配置" text="集成配置" popup="true" icon="AllIcons.Actions.Colors">
            <reference id="dev.config"/>
            <reference id="dev.dictionary"/>
            <reference id="dev.openHome"/>
            <reference id="dev.openConfig"/>
            <reference id="dev.openNccdev"/>

            <!--添加到bar显示-->
            <add-to-group group-id="ToolbarRunGroup" anchor="first"/>
            <!--添加到tool菜单显示-->
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </group>
    </actions>
</idea-plugin>